# 个人中心性能优化 

### ParallelPool的途径

ParallelPool 的方式已经使得服务器端的延时降低到原来的50%。MyHome.htm从720ms左右下降到430ms， ShowUser.e已经从660左右下降到380ms。 

但因为Tapestry的组件框架本质上是窜行执行的，为保持系统可读性、简单性，组件之间还是要保留窜行的特性。 而单个组件内部的并行化基本上已经达到最大限度了。 


接下来的优化，在服务端有两种途径：

- 在组件化的后面，增加一层 Logic/Controller， 将数据取出的过程集中，寻求进一步的并行化。
- 改写Tapestry的渲染方式，使得其能并行执行组件。 但这要求组件之间没有依赖关系，组件又是分散的，可重用到不同的场合，对开发者可能是一种负担。 ```或许可以将并行放到某个胶合层的代码/配置```。  另外一方面，```改写Tapestry 4 为并行```， 并不是个容易的事情。

另外，还可以考虑缓存和BigPipe的方式。

#### ParaellPool的成本

目前来看，成本并不高， sys的cpu保持在2%~5%之间。 与历史比对，没有带来显著成本。

### BigPipe的途径



### Cache的途径

缓存方面，目前面临的最大问题，

- 一是热点数据从表面来看并不集中，或许需要进一步探索。 
- 二是由于历史的原因，缓存的一致性可能是个问题。 
